# 更新日志

所有重要的项目更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.0.1] - 2025-11-29

### 🐛 修复

- **修复 64 位兼容性**：修复 INPUT 结构体在 64 位 Windows 上大小不正确导致输入失败的问题
- **修复取消热键**：热键回调改为异步执行，`Ctrl+Alt+C` 现在可以正确取消正在进行的输入
- **修复字符统计**：输出统计现在正确排除被跳过的 `\r` 字符

### ✨ 改进

- **热键统一**：所有操作改用 `Ctrl+Alt+` 组合键，避免与其他应用冲突
  - `Ctrl+Alt+P` - 触发输入
  - `Ctrl+Alt+C` - 取消输入
  - `Ctrl+Alt+S` - 打开设置
  - `Ctrl+Alt+Q` - 退出程序
- **倒计时显示**：等待期间显示实时倒计时，支持小于 1 秒的等待时间
- **等待时间范围**：等待时间现在支持 0.5-10 秒（之前是 1-10 秒）
- **更好的提示**：剪贴板为空时给出更友好的操作提示
- **输入时保护**：输入过程中按设置热键会提示等待，不会中断输入

### 🔧 代码优化

- 移除自动安装依赖的代码，简化项目结构
- 移除未使用的变量和导入

---

## [2.0.0] - 2025-11-27

### 🎉 重大更新

这是一个重大版本更新，完全重写了核心输入引擎。

### ✨ 新增

- **Unicode 支持**：现在可以输入中文、日文、韩文等多语言字符
- **运行时配置**：按 `Ctrl+Alt+S` 可以调整输入延迟和等待时间
- **进度显示**：输入长文本时每50个字符显示一次进度
- **更好的错误处理**：剪贴板读取失败自动重试，字符发送失败显示警告
- **设置菜单**：交互式设置界面，实时调整参数

### 🔄 变更

- **核心技术**：从 `pydirectinput` + `pyautogui` 迁移到纯 Windows API (`ctypes` + `SendInput`)
- **热键变更**：从 `Ctrl+Alt+J` 改为 `Ctrl+Alt+P`（减少冲突）
- **默认延迟**：从 100ms 降低到 5ms（可配置 1-100ms）
- **等待时间**：从 0.5s 增加到 2s（可配置 0.5-10s）
- **依赖简化**：从 5 个依赖减少到 2 个（`keyboard` + `pywin32`）

### 🗑️ 移除

- 移除 `pyautogui` 依赖
- 移除 `pyperclip` 依赖
- 移除 `pydirectinput` 依赖

### 🐛 修复

- 修复长文本输入时的稳定性问题
- 修复剪贴板读取偶尔失败的问题
- 修复退出时可能的资源泄漏

### 📦 性能优化

- 减少依赖库，exe 文件体积减小约 20%
- 使用底层 API，输入响应更快
- 优化内存使用，长文本输入更稳定

### 📝 文档更新

- 添加 Unicode 支持说明
- 添加配置选项文档
- 更新使用示例
- 添加版本迁移指南

### ⚠️ 破坏性变更

- **热键变更**：用户需要使用新的热键 `Ctrl+Alt+P`
- **API 变更**：如果有二次开发，需要适配新的实现

### 🔄 迁移指南

从 v1.0 升级到 v2.0：
1. 下载新版本
2. 注意热键已变更为 `Ctrl+Alt+P`
3. 享受 Unicode 支持和新功能
4. 如需回退，v1.0 已备份到 `legacy/` 文件夹

---

## [1.0.0] - 2025-11-27

### 🎉 首次发布

第一个正式版本发布。

### ✨ 特性

- **硬件级键盘模拟**：使用 DirectInput 技术，绕过反作弊检测
- **支持主流游戏启动器**：战网、Steam、Riot Vanguard、Epic Games 等
- **快捷键触发**：`Ctrl+Alt+J` 一键自动输入
- **管理员权限**：自动请求，确保输入有效
- **开箱即用**：提供打包好的 exe 文件

### 📋 系统要求

- Windows 7/8/10/11
- 管理员权限
- Python 3.7+（仅源码运行）

### 🐛 已知问题

- 仅支持英文字母、数字和常见符号
- 不支持中文输入
- 仅支持标准美式键盘布局

### 📝 依赖

- pyautogui
- pyperclip
- keyboard
- pydirectinput
- pywin32

---

## 版本说明

### 语义化版本规则

- **主版本号（Major）**：不兼容的 API 修改
- **次版本号（Minor）**：向下兼容的功能性新增
- **修订号（Patch）**：向下兼容的问题修正

### 版本历史

- **v2.0.1** (2025-11-29) - Bug 修复，64位兼容性，热键改进
- **v2.0.0** (2025-11-27) - 重大更新，Unicode 支持
- **v1.0.0** (2025-11-27) - 首次发布

### 未来计划

#### v2.1.0（计划中）
- [ ] 添加配置文件支持
- [ ] 自定义热键
- [ ] 输入历史记录
- [ ] GUI 界面（可选）

#### v2.2.0（计划中）
- [ ] 宏录制功能
- [ ] 多剪贴板支持
- [ ] 云同步配置

---

[2.0.1]: https://github.com/buptanswer/autopaste/compare/v2.0.0...v2.0.1
[2.0.0]: https://github.com/buptanswer/autopaste/compare/v1.0.0...v2.0.0
[1.0.0]: https://github.com/buptanswer/autopaste/releases/tag/v1.0.0